{"is_source_file": true, "format": "TypeScript", "description": "This file defines an Angular service called AuthStore that manages authentication state by storing and retrieving a token and user data from localStorage, ensuring SSR safety. It provides methods for setting, getting, and clearing the session data, and observes changes via RxJS BehaviorSubjects.", "external_files": ["@angular/core", "@angular/common", "rxjs"], "external_methods": ["inject", "isPlatformBrowser"], "published": ["AuthStore"], "classes": [{"name": "AuthStore", "description": "An Angular service that manages authentication token and user data, providing SSR-safe access to storage and reactive streams for auth state."}], "methods": [{"name": "constructor", "description": "Initializes the AuthStore, loading token and user data from localStorage if available."}, {"name": "setSession", "description": "Sets the authentication token and user data, storing them in localStorage."}, {"name": "clearSession", "description": "Clears the authentication data from memory and localStorage."}, {"name": "getToken", "description": "Returns the current authentication token."}, {"name": "getUser", "description": "Returns the current user data."}, {"name": "isAuthenticated", "description": "Returns true if a token exists, indicating an authenticated session."}, {"name": "getWin", "description": "Safely retrieves the 'window' object when in a browser environment."}], "calls": ["inject(PLATFORM_ID)", "isPlatformBrowser(this.platformId)", "w.localStorage.getItem", "w.localStorage.setItem", "w.localStorage.removeItem", "this.tokenSubject.next", "this.userSubject.next", "this.tokenSubject.getValue", "this.userSubject.getValue"], "search-terms": ["AuthStore", "localStorage Token Management", "SSR safe auth", "Angular auth service", "BehaviorSubject auth"], "state": 2, "file_id": 24, "knowledge_revision": 76, "git_revision": "d5ecea2a83e3f6cfe769162d30ad3f69b5a3e63c", "revision_history": [{"58": ""}, {"76": "d5ecea2a83e3f6cfe769162d30ad3f69b5a3e63c"}], "ctags": [{"_type": "tag", "name": "AuthStore", "path": "/home/kavia/workspace/code-generation/secure-login-portal-183106-183115/login_frontend/src/app/core/state/auth.store.ts", "pattern": "/^export class AuthStore {$/", "language": "TypeScript", "kind": "class"}, {"_type": "tag", "name": "TOKEN_KEY", "path": "/home/kavia/workspace/code-generation/secure-login-portal-183106-183115/login_frontend/src/app/core/state/auth.store.ts", "pattern": "/^const TOKEN_KEY = 'auth_token';$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "USER_KEY", "path": "/home/kavia/workspace/code-generation/secure-login-portal-183106-183115/login_frontend/src/app/core/state/auth.store.ts", "pattern": "/^const USER_KEY = 'auth_user';$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "getter", "path": "/home/kavia/workspace/code-generation/secure-login-portal-183106-183115/login_frontend/src/app/core/state/auth.store.ts", "pattern": "/^    const getter = new Function('return typeof window !== \"undefined\" ? window : null;');$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "platformId", "path": "/home/kavia/workspace/code-generation/secure-login-portal-183106-183115/login_frontend/src/app/core/state/auth.store.ts", "pattern": "/^  private platformId = inject(PLATFORM_ID);$/", "language": "TypeScript", "kind": "property", "scope": "AuthStore", "scopeKind": "class"}, {"_type": "tag", "name": "t", "path": "/home/kavia/workspace/code-generation/secure-login-portal-183106-183115/login_frontend/src/app/core/state/auth.store.ts", "pattern": "/^        const t = w.localStorage.getItem(TOKEN_KEY);$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "u", "path": "/home/kavia/workspace/code-generation/secure-login-portal-183106-183115/login_frontend/src/app/core/state/auth.store.ts", "pattern": "/^        const u = w.localStorage.getItem(USER_KEY);$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "w", "path": "/home/kavia/workspace/code-generation/secure-login-portal-183106-183115/login_frontend/src/app/core/state/auth.store.ts", "pattern": "/^    const w = this.getWin();$/", "language": "TypeScript", "kind": "constant"}], "hash": "ee0de4fcab6d6f43e62df2354f687558", "format-version": 4, "code-base-name": "login_frontend", "filename": "login_frontend/src/app/core/state/auth.store.ts", "fields": [{"name": "private platformId = inject(PLATFORM_ID);", "scope": "AuthStore", "scopeKind": "class", "description": "unavailable"}]}